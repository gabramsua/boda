<h1 class="display-4 d-flex justify-content-center">Confirmar asistencia</h1>
<p><span>Nos encantará estar con vosotros en nuestra boda. ¡Estamos deseando que llegue el día! En esta sección os pedimos que confirméis vuestra asistencia a la boda. 
         Por favor no te olvides de indicarnos también si necesitarás traslado en autobús (en el apartado 3).</span></p>
<p><span>Adoramos a vuestros peques y a vuestras mascotas, y por ello creemos que se merecen un día libre. Sólo adultos por favor.</span></p>

<div class="container d-flex justify-content-center mt-4"><h3>¡OS ESPERAMOS!</h3></div>

<!-- TODO: QUE NO SE OLVIDE CAMBIAR EL STEPPER LINEAL A TRUE  [linear]="true" -->
<mat-vertical-stepper  #stepper>
    <mat-step [stepControl]="quien_eres">
      <form [formGroup]="quien_eres" class="d-flex justify-content-around flex-wrap">
        <ng-template matStepLabel>¿Quién eres?</ng-template>
        <mat-form-field appearance="outline">
            <mat-label>Tu nombre</mat-label>
            <input matInput aria-label="nombre" formControlName="nombre">
        </mat-form-field>
        <mat-form-field appearance="outline">
            <mat-label>Tus apellidos</mat-label>
            <input matInput aria-label="apellidos" formControlName="apellidos">
        </mat-form-field>
      </form>
    </mat-step>

    <mat-step>        
        <form [formGroup]="asistencia">
            <ng-template matStepLabel>¿Vas a poder acompañarnos el 19 de Marzo?</ng-template>
            <mat-radio-group class="d-flex justify-content-around flex-wrap" aria-label="Select an option!" formControlName="vienes_o_que">
                <mat-radio-button value="true" class="col-sm-2">Sí</mat-radio-button>
                <mat-radio-button value="false" class="col-sm-4">No</mat-radio-button>
            </mat-radio-group>
        </form>
    </mat-step>

    <mat-step *ngIf="quien_eres.value.nombre !== '' && quien_eres.value.apellidos !== '' && asistencia.value.vienes_o_que === 'true'">        
        <form [formGroup]="buses">
            <ng-template matStepLabel>¿Necesitas traslado en autobús?</ng-template>
            
            <div class="container d-flex justify-content-center mb-4">
                <button type="button" class="btn btn-link" data-toggle="modal" data-target="#container_modal_traslados">Ver traslados</button>
            </div>
            <div class="modal fade" id="container_modal_traslados" tabindex="-1">
                <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2 class="modal-title">Traslados de autobús</h2>
                            <button class="close" data-dismiss="modal"><span>&times;</span></button>
                        </div>
                        <div class="modal-body">
                            <p><span>Pondremos a vuestra disposición el traslado en autobús a la Hacienda. 
                                Para la vuelta también habrá regreso, no os preocupéis.</span></p>
                            <div class="d-flex justify-content-center">
                                <img class="img-fluid" src="../assets/imgs/maestranza.jfif" alt="Gabri y Maria">
                            </div>
                            <p><span>El punto de origen será en el <u><b>Teatro de la Maestranza</b></u>, muy cerca de la Iglesia de la Caridad. 
                                    Para la vuelta habrá una parada en <u><b>Plaza de Cuba y otra en Tomares</b></u>, en un lugar aún por determinar. </span></p>
                            <p><span>Los horarios para la vuelta los indicaremos cuando se acerque la fecha, pero posiblemente <u><b>uno sea a las 20.00h, otro a las 22.30h </b></u>y otro al terminar la barra libre. Recuerda, este horario es aproximado y se definirá días antes del enlace.</span></p>

                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" data-dismiss="modal">Cerrar</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- <modal class="d-flex mb-3"></modal> -->
            <mat-radio-group class="d-flex justify-content-around flex-wrap" aria-label="Select an option!" formControlName="traslado">
                <mat-radio-button class="col-sm-4" value="ida_vuelta">Sí, ida y vuelta</mat-radio-button>
                <mat-radio-button class="col-sm-4" value="ida">Sólo la ida</mat-radio-button>
                <mat-radio-button class="col-sm-4" value="no">No</mat-radio-button>
            </mat-radio-group>
        </form>
    </mat-step>
    
    <mat-step *ngIf="quien_eres.value.nombre !== '' && quien_eres.value.apellidos !== '' && asistencia.value.vienes_o_que === 'true'">        
        <form [formGroup]="alergias">
            <ng-template matStepLabel>Alergias e intolerancias</ng-template>
            <div class="form-group">
                <label>Especifica por favor tus restricciones para tenerlas en cuenta: </label>
                <textarea class="form-control" formControlName="intolerancias" rows="3"></textarea>
            </div>
        </form>
    </mat-step>

    <mat-step *ngIf="quien_eres.value.nombre !== '' && quien_eres.value.apellidos !== '' && asistencia.value.vienes_o_que === 'true'">        
        <form [formGroup]="bebidas">
            <ng-template matStepLabel>Bebida favorita</ng-template>
            <div class="form-group">
                <label> Intentaremos poner las bebidas que le gusten a todos, o a la mayoría. Por favor, 
                    especifica alguna marca que te gustaría beber, quién sabe si sois muchos los que bebéis determinada marca ;-)&#128521; </label>
                <textarea class="form-control" formControlName="drinks" rows="3" placeholder="Ginebra marca tal, o Ron marca cual..."></textarea>
            </div>
        </form>
    </mat-step>
</mat-vertical-stepper>
<button 
    *ngIf="quien_eres.value.nombre !== '' && quien_eres.value.apellidos !== '' && asistencia.value.vienes_o_que !== ''"
    (click)="guardar()"
>
    FINALIZAR
</button>

<!-- {{ quien_eres.value.nombre }} - {{ quien_eres.value.apellidos }} -->
<!-- {{ asistencia.value.vienes_o_que }} -->